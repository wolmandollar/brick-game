<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>ë¸Œë¦­ ë¸Œë ˆì´ì»¤ íŒŒìŠ¤í…”</title>
<style>
  :root{
    /* ğŸ”† ë¶€ë“œëŸ¬ìš´ íŒŒìŠ¤í…” í…Œë§ˆ */
    --bg:#f5f5fa;        /* í˜ì´ì§€ ë°°ê²½ */
    --fg:#444;           /* ê¸€ììƒ‰ */
    --accent:#ffa7c4;    /* ê³µ & í¬ì¸íŠ¸ ìƒ‰ */
    --brick1:#ffd6a5;
    --brick2:#caffbf;
    --brick3:#9bf6ff;
    --brick4:#a0c4ff;
    --brick5:#bdb2ff;
    --paddle:#ffadad;
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0;
    background:var(--bg);
    color:var(--fg);
    font-family:'Segoe UI',Roboto,'Noto Sans KR',sans-serif;
    display:flex; flex-direction:column; align-items:center; gap:12px;
    padding:20px;
  }
  header{width:100%; max-width:900px; display:flex; justify-content:space-between; align-items:center}
  .hud{display:flex; gap:10px; font-weight:700}
  .chip{background:#fff; padding:6px 12px; border-radius:20px; box-shadow:0 1px 3px rgba(0,0,0,.1)}
  .panel{width:100%; max-width:900px; display:flex; justify-content:space-between; flex-wrap:wrap; gap:10px}
  .btn{padding:8px 14px; border-radius:20px; border:none; cursor:pointer;
       background:#fff; box-shadow:0 1px 3px rgba(0,0,0,.1); font-weight:700;}
  .note{font-size:14px; opacity:.8}
  .wrap{width:100%; max-width:900px; aspect-ratio:16/9; border-radius:14px;
        overflow:hidden; background:#fff; box-shadow:0 6px 12px rgba(0,0,0,.1); position:relative;}
  canvas{width:100%; height:100%; display:block; background:transparent}
  .center-msg{
    position:absolute; inset:0; display:grid; place-items:center;
    font-weight:800; color:var(--fg); text-align:center; font-size:20px;
    background:rgba(255,255,255,.6);
  }
  .hidden{display:none}
</style>
</head>
<body>
  <header>
    <h2>ğŸ§± ë¸Œë¦­ ë¸Œë ˆì´ì»¤ íŒŒìŠ¤í…”</h2>
    <div class="hud">
      <div class="chip">ì ìˆ˜ <span id="score">0</span></div>
      <div class="chip">ìŠ¤í…Œì´ì§€ <span id="stage">1</span></div>
      <div class="chip">ëª©ìˆ¨ <span id="lives">3</span></div>
    </div>
  </header>

  <section class="panel">
    <span class="note">â† â†’ ë˜ëŠ” A/D, Space/í´ë¦­ìœ¼ë¡œ ì‹œì‘Â·ì¼ì‹œì •ì§€</span>
    <div>
      <button id="startBtn" class="btn">â–¶ ì‹œì‘/ì¼ì‹œì •ì§€</button>
      <button id="resetBtn" class="btn">âŸ³ ë¦¬ì…‹</button>
    </div>
  </section>

  <div class="wrap" id="wrap">
    <canvas id="game" width="900" height="506"></canvas>
    <div id="msg" class="center-msg">Space ë˜ëŠ” í´ë¦­ìœ¼ë¡œ ì‹œì‘!</div>
  </div>

<script>
(() => {
  const c = document.getElementById('game');
  const ctx = c.getContext('2d');
  const msgEl = document.getElementById('msg');
  const scoreEl = document.getElementById('score');
  const stageEl = document.getElementById('stage');
  const livesEl = document.getElementById('lives');

  let running=false, over=false;
  let score=0, stage=1, lives=3;

  const paddle = {w:110,h:14,x:c.width/2-55,y:c.height-30,speed:8};
  const ball = {x:c.width/2,y:c.height-60,r:8,vx:4,vy:-4};
  const brickConf = {rows:5,cols:10,h:20,pad:8,top:60,side:30};
  let bricks=[];

  const colors = ['var(--brick1)','var(--brick2)','var(--brick3)','var(--brick4)','var(--brick5)'];

  function buildStage(){
    bricks=[];
    const bw = (c.width-brickConf.side*2-(brickConf.cols-1)*brickConf.pad)/brickConf.cols;
    for(let r=0;r<brickConf.rows;r++){
      for(let i=0;i<brickConf.cols;i++){
        bricks.push({x:brickConf.side+i*(bw+brickConf.pad),
                     y:brickConf.top+r*(brickConf.h+brickConf.pad),
                     w:bw,h:brickConf.h,color:colors[r%colors.length]});
      }
    }
  }

  function resetGame(){
    score=0;stage=1;lives=3;
    scoreEl.textContent=score;
    stageEl.textContent=stage;
    livesEl.textContent=lives;
    paddle.x=c.width/2-paddle.w/2;
    ball.x=c.width/2;ball.y=c.height-60;ball.vx=4;ball.vy=-4;
    buildStage();
    running=false;over=false;
    msgEl.textContent="Space ë˜ëŠ” í´ë¦­ìœ¼ë¡œ ì‹œì‘!";
    msgEl.classList.remove('hidden');
  }

  function toggleRun(){
    if(over){ resetGame(); return; }
    running=!running;
    msgEl.classList.toggle('hidden',running);
    if(!running && !over) msgEl.textContent="ì¼ì‹œì •ì§€ (Space/í´ë¦­ìœ¼ë¡œ ì¬ì‹œì‘)";
  }

  document.getElementById('startBtn').onclick=toggleRun;
  document.getElementById('resetBtn').onclick=resetGame;
  document.addEventListener('keydown',e=>{
    if(e.code==="Space"){ e.preventDefault(); toggleRun(); }
    if(e.key==="ArrowLeft"||e.key==="a") left=true;
    if(e.key==="ArrowRight"||e.key==="d") right=true;
  });
  document.addEventListener('keyup',e=>{
    if(e.key==="ArrowLeft"||e.key==="a") left=false;
    if(e.key==="ArrowRight"||e.key==="d") right=false;
  });
  document.getElementById('wrap').addEventListener('click',toggleRun);

  let left=false,right=false;

  function update(){
    if(left) paddle.x -= paddle.speed;
    if(right) paddle.x += paddle.speed;
    paddle.x=Math.max(0,Math.min(c.width-paddle.w,paddle.x));

    ball.x+=ball.vx; ball.y+=ball.vy;
    if(ball.x<ball.r||ball.x>c.width-ball.r) ball.vx*=-1;
    if(ball.y<ball.r) ball.vy*=-1;

    // íŒ¨ë“¤
    if(ball.y+ball.r>=paddle.y && ball.x>paddle.x && ball.x<paddle.x+paddle.w){
      ball.vy*=-1;
      const hit = (ball.x-(paddle.x+paddle.w/2))/(paddle.w/2);
      ball.vx = 5*hit;
    }

    // ë²½ëŒ
    for(let i=0;i<bricks.length;i++){
      const b=bricks[i];
      if(ball.x> b.x && ball.x<b.x+b.w && ball.y-ball.r<b.y+b.h && ball.y+ball.r> b.y){
        ball.vy*=-1;
        bricks.splice(i,1);
        score+=10; scoreEl.textContent=score;
        break;
      }
    }

    // ë°”ë‹¥
    if(ball.y>c.height){
      lives--; livesEl.textContent=lives;
      if(lives<=0){over=true;running=false;msgEl.textContent="ê²Œì„ ì˜¤ë²„! Spaceë¡œ ì¬ì‹œì‘";msgEl.classList.remove('hidden');}
      else {
        ball.x=c.width/2;ball.y=c.height-60;ball.vx=4;ball.vy=-4;
        paddle.x=c.width/2-paddle.w/2;
        running=false;
        msgEl.textContent="Space ë˜ëŠ” í´ë¦­ìœ¼ë¡œ ì¬ì‹œì‘"; msgEl.classList.remove('hidden');
      }
    }

    if(bricks.length===0){
      stage++; stageEl.textContent=stage;
      brickConf.rows++;
      buildStage();
      ball.x=c.width/2; ball.y=c.height-60;
      running=false;
      msgEl.textContent=`ìŠ¤í…Œì´ì§€ ${stage-1} í´ë¦¬ì–´! Spaceë¡œ ë‹¤ìŒ ë‹¨ê³„`;
      msgEl.classList.remove('hidden');
    }
  }

  function draw(){
    ctx.clearRect(0,0,c.width,c.height);
    // ë²½ëŒ
    bricks.forEach(b=>{
      ctx.fillStyle=b.color;
      ctx.fillRect(b.x,b.y,b.w,b.h);
    });
    // íŒ¨ë“¤
    ctx.fillStyle='var(--paddle)';
    ctx.fillRect(paddle.x,paddle.y,paddle.w,paddle.h);
    // ê³µ
    ctx.beginPath();
    ctx.fillStyle='var(--accent)';
    ctx.arc(ball.x,ball.y,ball.r,0,Math.PI*2);
    ctx.fill();
  }

  function loop(){
    if(running) update();
    draw();
    requestAnimationFrame(loop);
  }

  resetGame();
  loop();
})();
</script>
</body>
</html>
